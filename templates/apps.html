<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App Showcase</title>
    <style>
      /* Styles for the app cards */
      .app-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        border-radius: 8px;
        background-color: #f5f5f5;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .app-card img {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 50%;
        margin-bottom: 10px;
      }

      .app-card h3 {
        margin-bottom: 5px;
        font-size: 18px;
      }

      .app-card p {
        color: #777;
        font-size: 14px;
      }

      /* Styles for the app container */
      .app-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-top: 40px;
      }

      /* Modal styles */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        visibility: hidden;
        opacity: 0;
        transition: visibility 0s linear 0.25s, opacity 0.25s;
      }

      .modal-content {
        background-color: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        max-width: 500px;
        text-align: center;
        position: relative;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 24px;
      }

      .modal-close {
        cursor: pointer;
        font-size: 20px;
        color: #888;
      }

      .modal-body {
        margin-bottom: 20px;
      }

      /* Modal trigger styles */
      .app-card {
        /* Your app card styles here */
      }

      .app-card .app-details-btn {
        cursor: pointer;
        background-color: #f5f5f5;
        color: #888;
        border: none;
        border-radius: 4px;
        padding: 8px 12px;
        font-size: 14px;
      }

      .app-card .app-details-btn:hover {
        background-color: #e0e0e0;
      }
    </style>
  </head>
  <body>
    {% set custom_apps = apps %}

    <div class="app-container">
      {% for app in apps %}
      <!-- App card -->
      <div class="app-card">
        <img src="{{ app.display_image }}" alt="{{ app.name }} icon" />
        <h3>{{ app.name }}</h3>
        <p>{{ app.category }}</p>
        <p>{{ app.description }}</p>
        <button class="app-details-btn" onclick="openModal('{{ app.name }}')">
          View Details
        </button>
      </div>
      {% endfor %}
    </div>

    <!-- App details modal -->
    <div id="app-details-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="app-details-title"></h2>
          <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
          <p>
            <strong>Description:</strong>
            <span id="app-details-description"></span>
          </p>
          <p>
            <strong>Category:</strong> <span id="app-details-category"></span>
          </p>
          <p>
            <strong>Developer:</strong> <span id="app-details-developer"></span>
          </p>
          <p>
            <strong>Date Published:</strong>
            <span id="app-details-date-published"></span>
          </p>
          <p>
            <strong>Date Updated:</strong>
            <span id="app-details-date-updated"></span>
          </p>
          <!-- Add more details as needed -->
        </div>
      </div>
    </div>

    <script>
      function openModal(appName) {
        const app = findAppByName(appName);
        if (app) {
          const modal = document.getElementById("app-details-modal");
          const modalTitle = document.getElementById("app-details-title");
          const modalDescription = document.getElementById(
            "app-details-description"
          );
          const modalCategory = document.getElementById("app-details-category");
          const modalDeveloper = document.getElementById(
            "app-details-developer"
          );
          const modalDatePublished = document.getElementById(
            "app-details-date-published"
          );
          const modalDateUpdated = document.getElementById(
            "app-details-date-updated"
          );

          modalTitle.textContent = app.name;
          modalDescription.textContent = app.description;
          modalCategory.textContent = app.category;
          modalDeveloper.textContent = app.app_info.developer;
          modalDatePublished.textContent = app.app_info.date_published;
          modalDateUpdated.textContent = app.app_info.date_updated;

          modal.style.visibility = "visible";
          modal.style.opacity = "1";
        }
      }

      function closeModal() {
        const modal = document.getElementById("app-details-modal");
        modal.style.visibility = "hidden";
        modal.style.opacity = "0";
      }

      function findAppByName(appName) {
        const apps = JSON.parse("{{custom_apps | tojson}}");
        return apps.find((app) => app.name === appName);
      }
    </script>
  </body>
</html>
